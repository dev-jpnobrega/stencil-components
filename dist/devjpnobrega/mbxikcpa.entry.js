const t=window.devJpnobrega.h,e=(t,e)=>0===t?e:t-10,i=(t,e)=>t-e,s=(t,e)=>t+e;var a=Object.freeze({TUBES:function({context:t,x:a,y:r,width:h,height:o,color:n}){t.fillStyle=n,t.fillRect(a,r,h,o),t.fillRect(i(a,6),e(r,o),s(h,13),10),function(t,e,i,s,a,r,h,o){if(void 0===o&&(o=!0),void 0===r&&(r=5),"number"==typeof r)r={tl:r,tr:r,br:r,bl:r};else{var n={tl:0,tr:0,br:0,bl:0};for(var c in n)r[c]=r[c]||n[c]}t.beginPath(),t.moveTo(e+r.tl,i),t.lineTo(e+s-r.tr,i),t.quadraticCurveTo(e+s,i,e+s,i+r.tr),t.lineTo(e+s,i+10-r.br),t.quadraticCurveTo(e+s,i+10,e+s-r.br,i+10),t.lineTo(e+r.bl,i+10),t.quadraticCurveTo(e,i+10,e,i+10-r.bl),t.lineTo(e,i+r.tl),t.quadraticCurveTo(e,i,e+r.tl,i),t.closePath(),{tl:50,br:50}&&t.fill(),o&&t.stroke()}(t,i(a,6),e(r,o),s(h,13),0,5,0,!0),t.strokeRect(a,r,h,o)},AVATAR:function({context:t,x:e,y:i,width:s,height:a,color:r}){t.fillStyle=r,t.fillRect(e,i,s,a)},TEXT:function({context:t,x:e,y:i,width:s,height:a,color:r,text:h}){t.font=s+" "+a,t.fillStyle=r,t.fillText(h,e,i)}});class r{constructor({context:t,width:e,height:i,color:s,x:r,y:h,Type:o=a.TUBES}){this.text="",this.x=0,this.y=0,this.width=0,this.height=0,this.speedX=0,this.speedY=0,this.gravity=0,this.gravitySpeed=0,this.Type=o,this.width=e,this.height=i,this.x=r,this.y=h,this.context=t,this.color=s}update(t=this.color){new this.Type({context:this.context,x:this.x,y:this.y,width:this.width,height:this.height,color:t,font:this.width+" "+this.height,text:this.text})}updatePositionX(t){this.x+=t}updateGravity(t){this.gravity=t}hitBottom(){let t=this.context.canvas.height-this.height;this.y>t&&(this.y=t,this.gravitySpeed=0)}newPos(){this.gravitySpeed+=this.gravity,this.x+=this.speedX,this.y+=this.speedY+this.gravitySpeed,this.hitBottom()}crashWith(t){let e=!0;return(this.y+this.height<t.y||this.y>t.y+t.height||this.x+this.width<t.x||this.x>t.x+t.width)&&(e=!1),e}}class h{constructor(){this.width=500,this.height=500,this.piece=void 0,this.frameNo=0,this.obstacles=[]}updateAreaHandler(t){console.timeStamp(`${t}`),this.update()}componentDidLoad(){this.onStartGame()}componentWillLoad(){}onStartGame(){this.canvas=this.el.shadowRoot.querySelector("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.context=this.canvas.getContext("2d"),this.createArea.emit({context:this.context}),this.interval=setInterval(()=>this.updateArea.emit({score:this.frameNo}),20)}createInitalCanvasElements(){let t,e,i,s,a,h,o;t=this.canvas.width,s=20,a=200,e=Math.floor(181*Math.random()+20),h=50,o=200,i=Math.floor(151*Math.random()+50),this.obstacles.push(new r({context:this.context,width:50,height:e,color:"green",x:t,y:0})),this.obstacles.push(new r({context:this.context,width:50,height:t-e-i,color:"green",x:t,y:e+i}))}checkCrashWith(){for(let t=0;t<this.obstacles.length;t+=1)if(this.piece.crashWith(this.obstacles[t]))return this.obstacles[t].update("red"),clearInterval(this.interval),!0;return!1}clear(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}update(){if(this.piece){if(this.checkCrashWith())return this.updateArea.emit({crash:!0,score:this.frameNo});this.clear(),this.frameNo+=1,(1===this.frameNo||this.everyInterval(150))&&this.createInitalCanvasElements();for(let t=0;t<this.obstacles.length;t+=1)this.obstacles[t].updatePositionX(-1),this.obstacles[t].update();this.piece.newPos(),this.piece.update()}}everyInterval(t){return this.frameNo/t%1==0}render(){return t("div",{class:"base-area-game",id:"gameArea"},t("canvas",{id:"gravityCanvas"}))}static get is(){return"gravity-area"}static get encapsulation(){return"shadow"}static get properties(){return{el:{elementRef:!0},height:{type:Number,attr:"height"},piece:{type:"Any",attr:"piece"},width:{type:Number,attr:"width"}}}static get events(){return[{name:"updateArea",method:"updateArea",bubbles:!0,cancelable:!0,composed:!0},{name:"createArea",method:"createArea",bubbles:!0,cancelable:!0,composed:!0}]}static get listeners(){return[{name:"updateArea",method:"updateAreaHandler"}]}static get style(){return"canvas{border:1px solid #d3d3d3;background-color:transparent}.gravity-score{font-family:Arial,Helvetica,sans-serif;font-size:20px;padding:5px;width:auto;border:1px solid #639;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px}"}}class o{constructor(){this.description="",this.title="",this.score="",this.isStartGame=!1}componentDidLoad(){}updateAreaHandler(t){this.score=t.detail.score,this.updateScore(this.score)}createAreaHandler(t){const{context:e}=t.detail;this.createPiece(e)}updateScore(t){this.htmlScore.innerText=`SCORE: ${t}`}createPiece(t){this.piece=new r({context:t,width:30,height:30,color:"red",x:10,y:120,Type:a.AVATAR}),this.piece.updateGravity(.05)}onMouseDown(){this.piece.updateGravity(-.2)}onMouseUp(){this.piece.updateGravity(.05)}renderGravityArea(){return this.isStartGame?t("div",{class:"base-area-game"},t("div",{ref:t=>this.htmlScore=t}),t("gravity-area",{width:480,height:270,piece:this.piece})):t("div",null,"We are going")}render(){return t("div",{class:"gravity-base"},this.renderGravityArea(),t("p",null,t("button",{type:"button",onClick:()=>this.isStartGame=!0},"START GAME"),t("button",{type:"button",onMouseDown:()=>this.onMouseDown(),onMouseUp:()=>this.onMouseUp()},"ACT")))}static get is(){return"gravity-game-component"}static get properties(){return{description:{type:String,attr:"description"},isStartGame:{state:!0},score:{state:!0},title:{type:String,attr:"title"}}}static get listeners(){return[{name:"updateArea",method:"updateAreaHandler"},{name:"createArea",method:"createAreaHandler"}]}static get style(){return"canvas{border:1px solid #d3d3d3;background-color:transparent}.gravity-score{font-family:Arial,Helvetica,sans-serif;font-size:20px;padding:5px;width:auto;border:1px solid #639;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px}"}}export{h as GravityArea,o as GravityGameComponent};